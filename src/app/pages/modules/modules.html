<p-toolbar [style]="{ 'border-radius': '3rem', 'padding': '1rem 2.5rem 1rem 1.5rem', 'margin-bottom': '2rem' }">
  <ng-template #start>
    <div class="flex items-center gap-2">
      <span class="page-title">Typing Modules</span>
    </div>
  </ng-template>
  <ng-template #center>
    <!--  
    <p-iconfield iconPosition="left">
      <p-inputicon class="pi pi-search" />
      <input type="text" pInputText placeholder="Search" />
    </p-iconfield> 
    -->
  </ng-template>
  <ng-template #end>
    <div class="flex items-center gap-2">
    </div>
  </ng-template>
</p-toolbar>
<div class="card">
  <p-dataview #dv [value]="modules" [layout]="layout">
    <ng-template #header>
      <div class="flex justify-end">
        <p-selectbutton [(ngModel)]="layout" [options]="options" [allowEmpty]="false">
          <ng-template #item let-item>
            <i class="pi" [ngClass]="{ 'pi-bars': item === 'list', 'pi-table': item === 'grid' }"></i>
          </ng-template>
        </p-selectbutton>
      </div>
    </ng-template>

    <!-- ✅ LIST LAYOUT -->
    <ng-template #list let-items>
      <div *ngFor="let module of items; let first = first">
        <div class="flex flex-col sm:flex-row sm:items-center p-6 gap-4"
          [ngClass]="{ 'border-t border-surface-200 dark:border-surface-700': !first }">
          <div class="md:w-40 relative">
            <img class="block xl:block mx-auto rounded w-full" [src]="module.imageUrl" [alt]="module.moduleName" />
            <p-tag [value]="getStatus(module)" [severity]="getSeverity(module)" class="absolute dark:!bg-surface-900"
              [style.left.px]="4" [style.top.px]="4" />
          </div>

          <div class="flex flex-col md:flex-row justify-between md:items-center flex-1 gap-6">
            <div class="flex flex-col gap-2">
              <div>
                <span class="font-medium text-surface-500 dark:text-surface-400 text-sm">{{ module.category }}</span>
                <div class="text-lg font-medium mt-2">{{ module.moduleName }}</div>
              </div>
              <p class="text-sm text-surface-600 dark:text-surface-400">
                {{ module.description }}
              </p>
            </div>

            <!-- ✅ Buttons -->
            <div class="flex flex-row gap-2 md:flex-row">
              <p-button [label]="module.isActive ? 'Continue' : 'Module'" icon="pi pi-play"
                class="flex-auto md:flex-initial whitespace-nowrap" (onClick)="openSession(module.moduleId)"></p-button>

              <p-button label="Sessions" icon="pi pi-eye" [outlined]="true"
                (onClick)="viewSessions(module.moduleId)"></p-button>
            </div>
          </div>
        </div>
      </div>
    </ng-template>

    <!-- ✅ GRID LAYOUT -->
    <ng-template #grid let-items>
      <div class="grid grid-cols-12 gap-4">
        <div *ngFor="let module of items" class="col-span-12 sm:col-span-6 md:col-span-4 xl:col-span-6 p-2">
          <div
            class="p-6 border border-surface-200 dark:border-surface-700 rounded flex flex-col bg-surface-0 dark:bg-surface-900">
            <div class="relative flex justify-center rounded">
              <img class="rounded w-full max-w-xs" [src]="module.imageUrl" [alt]="module.moduleName" />
              <p-tag [value]="getStatus(module)" [severity]="getSeverity(module)" class="absolute dark:!bg-surface-900"
                [style.left.px]="4" [style.top.px]="4" />
            </div>
            <div class="pt-6 flex flex-col gap-4">
              <div>
                <!-- <span class="font-medium text-surface-500 text-sm">{{ module.category }}</span> -->
                <div class="text-lg font-medium mt-1">{{ module.moduleName }}</div>
              </div>
              <p class="text-sm text-surface-600 dark:text-surface-400">
                {{ module.description }}
              </p>
              <div class="flex gap-2">
                <p-button [label]="module.isActive ? 'Continue' : 'Module'" icon="pi pi-play"
                  class="flex-auto whitespace-nowrap" (onClick)="openSession(module.moduleId)"></p-button>

                <p-button label="Sessions" icon="pi pi-eye" [outlined]="true"
                  (onClick)="viewSessions(module.moduleId)"></p-button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </ng-template>
  </p-dataview>
</div>